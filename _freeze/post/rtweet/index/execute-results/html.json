{
  "hash": "7b7efd4693a00d210e9af7ee42806212",
  "result": {
    "markdown": "---\ntitle: \"Downloading Twitter data with rtweet\"\nsubtitle: \"Get your tweets, those you follow, followers, and Twitter lists\"\ndescription: \"A short breakdown of how to quickly download Twitter data using the rtweet package developed by rOpenSci.\"\ndate: \"2022/11/18\"\nimage: \"twitter-is-fine.jpg\"\nexecute: \n  eval: false\ncategories: \n  - rstats\n  - twitter\n---\n\n\nLast night, the 17th of November, 2022, I, like so many others, was rather gleefully, but also sadly, doom scrolling through Twitter as Elon Musk seemed to be rocketing the social network into the ground at amazing speed.\n\n\n{{< tweet _inundata 1593421891439513600 >}}\n\n\n\nIt seemed a good time to heed the warning that so many had put out about downloading your twitter data: your tweets, those you follow, your followers, and maybe the Twitter lists that you have created or followed. I knew that much of this could be done with the [rtweet](https://docs.ropensci.org/rtweet/articles/rtweet.html) package, and I had seen a few people tweet out ways to get the data, in particular, I had saved [Amelia McNamara's](https://twitter.com/AmeliaMN) tweet from [11 November 2022](https://twitter.com/AmeliaMN/status/1591100508298956808).\n\n![](AmeliaMN-2022-11-11.jpeg){fig-alt=\"@AmeliaMN's instructions for using rtweet.\"}\n\nI followed her script, played around with the functions in `rtweet` a bit, and tried to fit the basics of a script to download most of the important data in one tweet.\n\n\n{{< tweet vivalosburros 1593444948841443328 >}}\n\n\n\nBelow, I will expand on the Tweet to show more fully how to download and save your Twitter data. This closely follows [Amelia's script](https://gist.github.com/AmeliaMN/c2e75ca0da51232dd2f8200646fd24c5) but adds a bit of data.\n\n### Getting the data\n\nLet's get the data of the tweets, followers, those followed, and lists of a single user. Here, I use my own account of [@vivalosburros](http://twitter.com/vivalosburros).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load rtweet and tidyverse for cleaning and saving data\nlibrary(rtweet)\nlibrary(tidyverse)\n\n# Authenticate twitter\nauth_setup_default()\n\n# Twitter user name: I use my own name @vivalosburros\nuser <- \"vivalosburros\"\n\n# Your tweets -------------------------------------------------------------\n\ntweets <- get_timeline(user, n = Inf)\n\n# Who you follow ----------------------------------------------------------\n\nfriends <- get_friends(user)\nfriend_screennames <- lookup_users(friends$to_id)\n\n# Followers ---------------------------------------------------------------\n\nfollowers <- get_followers(user)\nfollower_screennames <- lookup_users(followers$from_id)\n\n# Lists -------------------------------------------------------------------\n\nlists <- lists_users(user)\n# Create a list of tibbles of the different lists you follow\nlists_screenames <- map(lists$list_id, lists_members)\n```\n:::\n\n\n### Clean the data\n\nThe data we get is returned as tibbles with many columns that have data that might not be all that useful to you. However, you can easily skip this data cleaning step if you just want the raw data. The variables that you are interested in might be different than the ones I have below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Select desired columns: Feel free to skip\n\ntweets <- tweets |> \n  select(created_at:full_text, retweet_count:retweeted)\n\nfriend_screennames <- friend_screennames |> \n  select(id:url)\n\nfollower_screennames <- follower_screennames |> \n  select(id:url)\n\nlists_screenames <- lists_screenames |> \n  map(~ select(., user_id:url))\n```\n:::\n\n\n### Saving the data\n\nNow we can save the data in a folder called `data/` with the [`readr`](https://readr.tidyverse.org). The only tricky part is using `walk2()` from [`purrr`](https://purrr.tidyverse.org) to save the list of tibbles that has the Twitter lists you follow, if you follow more than one.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save the tweets, following, and followers data\nwrite_csv(tweets, \"data/tweets.csv\")\nwrite_csv(friend_screennames, \"data/following.csv\")\nwrite_csv(follower_screennames, \"data/followers.csv\")\n\n# Save the list data and name csv with the list name\n\n# Get names of lists\nlist_names <- lists$name\nwalk2(lists_screenames,\n      list_names,\n      ~ write_csv(.x, paste0(\"data/list-\", .y, \".csv\")))\n```\n:::\n\n\nNow you have all your data. All that is left is to watch the ship sink and make fun of billionaires who think they are geniuses ðŸ«¡.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}